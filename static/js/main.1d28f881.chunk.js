(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){e.exports=a(185)},105:function(e,t,a){},106:function(e,t,a){},125:function(e,t){},127:function(e,t){},185:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(95),l=a.n(s),c=(a(105),a(2)),i=a(3),o=a(6),u=a(4),m=a(10),p=a(5),h=(a(106),a(20)),d=a(36),v=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar is-spaced has-shadow"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(h.b,{to:"/",className:"navbar-item"},r.a.createElement("img",{src:"/asserts/banner.png",width:"144",alt:"\u8109\u547d\u7f51"}))),r.a.createElement(h.b,{to:"/survey",className:"navbar-item"},"\u5168\u90e8\u7206\u6599"),r.a.createElement("div",{className:"navbar-end"},null===this.props.user&&r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement(h.b,{to:"/login",className:"button "},r.a.createElement("strong",null,"\u767b\u9646")))),null!==this.props.user&&r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement(h.b,{to:"/logout",className:"button "},r.a.createElement("strong",null,"\u9000\u51fa")))),r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement(h.b,{to:"/survey/add",name:"add",className:"button is-primary"},r.a.createElement("strong",null,"\u7206\u6599"))))))}}]),t}(n.Component),g=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("li",null,r.a.createElement("div",{className:"card company_list_item"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"title is-4"},this.props.name),r.a.createElement("p",{className:"subtitle is-6"},"996\u6307\u6570 ",this.props.intensePoint))),r.a.createElement("div",{className:"content"},r.a.createElement("span",null,"\u7206\u6599\u6570 ",this.props.surveyCount," "),r.a.createElement("span",null,"\u7206\u6599\u90e8\u95e8 ",this.props.departmentCount),r.a.createElement("span",null,"\u8ba4\u4e3a\u9760\u8c31 ",this.props.agreeCount," \u4eba"),r.a.createElement("span",null,"\u8ba4\u4e3a\u4e0d\u9760\u8c31 ",this.props.disagreeCount," \u4eba"))),r.a.createElement("footer",{className:"card-footer"},r.a.createElement("div",{className:"card-footer-item vote_footer"},r.a.createElement("div",{className:"columns vote_button_container"},r.a.createElement("div",{className:" column"},r.a.createElement("div",{className:"button ",name:"agree",onClick:this.props.handleClick},"\u9760\u8c31")),r.a.createElement("div",{className:" column"},r.a.createElement("div",{name:"disagree",onClick:this.props.handleClick,className:"button "},"\u4e0d\u9760\u8c31")),r.a.createElement("div",{className:" column"},r.a.createElement(h.b,{name:"add",onClick:this.props.handleClick,to:"/survey/add",className:"button "},"\u7206\u6599")))))))}}]),t}(n.Component);g.defaultProps={name:"\u67d0\u4e0d\u77e5\u540d\u516c\u53f8",totalIndex:0,totalCount:0,groupCount:0,agreeCount:0,disagreeCount:0};var b=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.companies.map(function(t){return r.a.createElement(g,{key:t.objectId,name:t.name,agreeCount:t.agreeCount,disagreeCount:t.disagreeCount,surveyCount:t.surveyCount,departmentCount:t.departmentCount,intensePoint:t.intensePoint,handleClick:function(a){return e.props.handleClick(t,a)}})});return r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"}),r.a.createElement("div",{className:"column is-11"},r.a.createElement("ul",null,t)),r.a.createElement("div",{className:"column "}))}}]),t}(n.Component),E=a(37),f="maiming",N="https://endpoint.pleaseban.me/parse";E.Parse.initialize(f),E.Parse.serverURL=N;var y=E.Parse.Object.extend("Vote"),O=(E.Parse.Object.extend("Company"),E.Parse.Object.extend("Survey")),j=E.Parse,C=a(25),k=a.n(C),A=function(e){return r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"}),r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement("nav",{className:"level",id:"search-panel"},r.a.createElement("div",{className:"level-left"},r.a.createElement("div",{className:"level-item"},r.a.createElement("p",{className:"subtitle is-5"},"\u76ee\u524d\u5171\u6536\u5f55\u4e86 ",r.a.createElement("strong",null,e.companyCount)," \u5bb6\u516c\u53f8"))),r.a.createElement("div",{className:"level-right"},r.a.createElement("div",{className:"level-item"},r.a.createElement("div",{className:"field has-addons"},r.a.createElement("p",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"\u641c\u7d22\u4e2d\u610f\u7684\u516c\u53f8"})),r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button"},"\u641c\u7d22"))))))),r.a.createElement("div",{className:"column"}))},w=function(e){var t="pageloader";return e.loading&&(t+=" is-active"),r.a.createElement("div",{className:t},r.a.createElement("span",{className:"title"},e.title))};w.defaultProps={title:"\u52a0\u8f7d\u4e2d",loading:!0};var P=a(189),S=a(187),I=a(17),x=a.n(I),U=a(186),D=a(190),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleGotoPage=a.handleGotoPage.bind(Object(m.a)(a)),a.handleNextPage=a.handleNextPage.bind(Object(m.a)(a)),a.handlePrevPage=a.handlePrevPage.bind(Object(m.a)(a)),a.state={objUrl:"/"+a.props.objectName+"/page/"},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleGotoPage",value:function(e,t){t.preventDefault(),this.props.gotoPage(e)}},{key:"handlePrevPage",value:function(e){e.preventDefault(),this.props.prevPage?this.props.prevPage():this.props.gotoPage(this.props.current-1)}},{key:"handleNextPage",value:function(e){e.preventDefault(),this.props.nextPage?this.props.nextPage():this.props.gotoPage(this.props.current+1)}},{key:"renderLinks",value:function(){var e=this;if(this.props.count<=10)return U.a(function(t){var a="pagination-link ",n="";return t===e.props.current?(a=NaN,n="Page "+t,r.a.createElement("li",null,r.a.createElement("a",{className:a,"aria-label":n,"aria-current":"page",href:"/#"},t))):(n="Goto page "+t,r.a.createElement("li",null,r.a.createElement("a",{href:e.state.objUrl+t,className:a,"aria-label":n,onClick:function(a){return e.handleGotoPage(t,a)}},t)))},D.a(1,this.props.count+1));var t=[];return this.props.current<=3?t.push(1,2,3,4):t.push(1,2),4<=this.props.current&&this.props.current<=this.props.count-3?t.push(-1,this.props.current-1,this.props.current,this.props.current+1,-1):t.push(-1,Math.floor(this.props.count/2),Math.floor(this.props.count/2)+10,-1),this.props.current>=this.props.count-2?t.push(this.props.count-3,this.props.count-2,this.props.count-1,this.props.count):t.push(this.props.count-1,this.props.count),U.a(function(t){var a="pagination-link ",n="";return t===e.props.current?(a=NaN,n="Page "+t,r.a.createElement("li",null,r.a.createElement("a",{className:a,"aria-label":n,"aria-current":"page",href:"/#"},t))):-1===t?r.a.createElement("li",null,r.a.createElement("span",{className:"pagination-ellipsis"},"\u2026")):(n="Goto page "+t,r.a.createElement("li",null,r.a.createElement("a",{href:e.state.objUrl+t,className:a,"aria-label":n,onClick:function(a){return e.handleGotoPage(t,a)}},t)))},t)}},{key:"render",value:function(){var e,t,a=this.renderLinks();return e=1===this.props.current?"/#":this.state.objUrl+(this.props.current-1),t=this.props.current===this.props.pages?"#":this.state.objUrl+(this.props.current+1),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"}),r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement("nav",{className:"pagination",role:"navigation","aria-label":"pagination"},1===this.props.current?r.a.createElement("a",{href:e,className:"pagination-previous",title:"This is the first page",onClick:this.handlePrevPage,disabled:!0},"\u4e0a\u4e00\u9875"):r.a.createElement("a",{href:e,className:"pagination-previous",title:"This is the first page",onClick:this.handlePrevPage},"\u4e0a\u4e00\u9875"),r.a.createElement("a",{href:t,className:"pagination-next",onClick:this.handleNextPage},"\u4e0b\u4e00\u9875"),r.a.createElement("ul",{className:"pagination-list"},a))),r.a.createElement("div",{className:"column"}))}}]),t}(n.Component);T.protoTypes={current:x.a.number,count:x.a.number,prevPage:x.a.func,nextPage:x.a.func,gotoPage:x.a.func,objectName:x.a.string.isRequired},T.defaultProps={current:1,count:1};var Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={companyCount:0,companies:[],pages:1,currentPage:1,loading:!0,notification:!0},a.handleClick=a.handleClick.bind(Object(m.a)(a)),a.handleAgree=a.handleAgree.bind(Object(m.a)(a)),a.gotoPage=a.gotoPage.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleAgree",value:function(e,t){var a=function(e){return e+"Count"},n=P.a(function(t){return t.objectId===e.objectId},this.state.companies),r=Object.assign({},this.state.companies[n]),s=r.voted;if(null!=s){if(s===t)return void k.a.info("\u4f60\u5df2\u7ecf\u6295\u7968\u4e86");r[a(r.voted)]-=1,r.voted=t}var l=a(t);r[l]?r[l]+=1:r[l]=1,r.voted=t;var c=S.a(n,r,this.state.companies);this.setState({companies:c});var i=j.User.current(),o=new j.Query("Vote");o.equalTo("from",i),o.equalTo("to",e.ref),o.first().then(function(a){if(null==a){var n=new y;n.set("from",i),n.set("to",e.ref),n.set("type",t),n.save()}else a.get("type")!==t&&(a.set("type",t),a.save())}).catch(function(e){console.log("vote error",e)})}},{key:"handleClick",value:function(e,t){if(null!=this.props.user)switch(t.target.getAttribute("name")){case"agree":this.handleAgree(e,"agree");break;case"disagree":this.handleAgree(e,"disagree")}else"add"===t.target.name&&t.preventDefault(),k.a.info("\u8bf7\u5148\u767b\u9646")}},{key:"gotoPage",value:function(e){var t=this;this.setState({loading:!0});var a=new j.Query("Company");a.skip(this.props.pageSize*(e-1)),a.limit(this.props.pageSize),a.find().then(function(a){var n=a.map(function(e){var t=e.toJSON();return t.ref=e,t});t.setState({companies:n,loading:!1,currentPage:e})}).catch(function(e){t.setState({loading:!1}),console.log(e)})}},{key:"componentDidMount",value:function(){var e=this;j.Cloud.run("homePage",{pageSize:this.props.pageSize}).then(function(t){var a=t.count,n=Math.floor(a/e.props.pageSize)+(a%e.props.pageSize>0?1:0),r=t.companies.map(function(e){var t=e.toJSON();return t.ref=e,t});e.setState({companyCount:a,companies:r,loading:!1,pages:n})}).catch(function(t){e.setState({loading:!1}),console.log(t)})}},{key:"render",value:function(){return r.a.createElement("section",{className:"section"},r.a.createElement(w,{loading:this.state.loading}),r.a.createElement(A,{companyCount:this.state.companyCount}),r.a.createElement(b,{companies:this.state.companies,handleClick:this.handleClick}),this.state.companies.length>0&&r.a.createElement(T,{objectName:"Company",current:this.state.currentPage,count:this.state.pages,gotoPage:this.gotoPage}))}}]),t}(n.Component);Q.defaultProps={companyCount:0,pageSize:10},Q.protoTypes={companyCount:x.a.number,pageSize:x.a.number};var B=a(60),z=a(188),G={company:"\u516c\u53f8",department:"\u90e8\u95e8",jobTitle:"\u5c97\u4f4d",overtimeAllowance:"\u52a0\u73ed\u8865\u507f",overtimeShift:"\u8c03\u4f11",isOvertime:"\u662f\u5426\u5b9e\u884c996",extraInfo:"\u5177\u4f53\u60c5\u51b5"},M={sure:"\u53ef\u4ee5",inTheory:"\u7406\u8bba\u4e0a\u53ef\u4ee5",negative:"\u4e0d\u53ef\u4ee5"},Y={never:"\u4ece\u4e0d",seldom:"\u5076\u5c14",often:"\u7ecf\u5e38"},W={none:"\u6ca1\u6709",lessThan2Times:"\u5c11\u4e8e2\u500d",overTwoTimes:"\u4e24\u500d\u53ca\u4ee5\u4e0a"},Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={company:"",department:"",jobTitle:"",overtimeAllowance:"",overtimeShift:"",isOvertime:"",extraInfo:"",isSubmitting:!1},a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(B.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=z.a(function(e){return""===t.state[e]&&"extraInfo"!==e},Object.keys(G));if(a.forEach(function(e){return k.a.error("\u60a8\u9700\u8981\u586b\u5199"+G[e])}),0===a.length){var n=new O;Object.keys(G).forEach(function(e){return n.set(e,t.state[e])}),this.setState({isSubmitting:!0}),n.save().then(function(e){t.setState({isSubmitting:!1}),k.a.info("\u63d0\u4ea4\u6210\u529f,3\u79d2\u540e\u8df3\u8f6c\u9996\u9875"),setTimeout(function(){window.location="/"},3e3)}).catch(function(e){t.setState({isSubmitting:!1}),k.a.error("\u63d0\u4ea4\u5931\u8d25,\u8bf7\u91cd\u8bd5"),console.log(e)})}}},{key:"render",value:function(){var e="button is-link";return this.state.isSubmitting&&(e+=" is-loading"),r.a.createElement("div",{className:"columns section"},r.a.createElement("div",{className:"column"}),r.a.createElement("div",{className:"column is-two-third"},r.a.createElement("div",null,r.a.createElement("div",{className:"title"},"\u586b\u5199\u7206\u6599\u4fe1\u606f"),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"\u516c\u53f8"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"company",className:"input",type:"text",placeholder:"\u516c\u53f8",onChange:this.handleInputChange,value:this.state.company}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"\u90e8\u95e8"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"department",className:"input",type:"text",placeholder:"\u90e8\u95e8",onChange:this.handleInputChange,value:this.state.department}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"\u5c97\u4f4d"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"jobTitle",className:"input",type:"text",placeholder:"\u5c97\u4f4d",onChange:this.handleInputChange,value:this.state.jobTitle}))),r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"\u662f\u5426\u5b9e\u884c996"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"isOvertime",value:"never",checked:"never"===this.state.isOvertime,onChange:this.handleInputChange}),"\u6ca1\u6709"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"isOvertime",value:"seldom",checked:"seldom"===this.state.isOvertime,onChange:this.handleInputChange}),"\u5076\u5c14"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"isOvertime",value:"often",checked:"often"===this.state.isOvertime,onChange:this.handleInputChange}),"\u7ecf\u5e38")),r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"\u662f\u5426\u6709\u52a0\u73ed\u8865\u507f"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"overtimeAllowance",value:"none",checked:"none"===this.state.overtimeAllowance,onChange:this.handleInputChange}),"\u6ca1\u6709"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"overtimeAllowance",value:"lessThan2Times",checked:"lessThan2Times"===this.state.overtimeAllowance,onChange:this.handleInputChange}),"\u6709,\u5c11\u4e8e2\u500d"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"overtimeAllowance",value:"overTwoTimes",checked:"overTwoTimes"===this.state.overtimeAllowance,onChange:this.handleInputChange}),"\u6709,\u4e24\u500d\u4ee5\u4e0a")),r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"996\u540e\u662f\u5426\u53ef\u4ee5\u8c03\u4f11"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"overtimeShift",value:"sure",checked:"sure"===this.state.overtimeShift,onChange:this.handleInputChange}),"\u53ef\u4ee5"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"overtimeShift",value:"inTheory",checked:"inTheory"===this.state.overtimeShift,onChange:this.handleInputChange}),"\u53ea\u662f\u539f\u5219\u4e0a\u53ef\u4ee5"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"overtimeShift",value:"negative",checked:"negative"===this.state.overtimeShift,onChange:this.handleInputChange}),"\u4e0d\u53ef\u4ee5")),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"\u5177\u4f53\u60c5\u51b5,\u53ef\u9009"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"extraInfo",placeholder:"\u5177\u4f53\u60c5\u51b5",value:this.state.extraInfo,onChange:this.handleInputChange}))),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:e,onClick:this.handleSubmit},"\u63d0\u4ea4")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-text"},r.a.createElement(h.b,{to:"/"},"\u53d6\u6d88")))))),r.a.createElement("div",{className:"column"}))}}]),t}(n.Component),V=a(98),H=a(49);var K=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authorizeUrl,a=e.clientId,r=e.redirectUri,s=e.state,l=e.args,c=e.render,i=e.component,o=e.children,u=function(e,t){if(null==t)return e;var a=Object(H.stringify)(t);return a?"".concat(e).concat(e.indexOf("?")<0?"?":"&").concat(a):e}("".concat(t),Object(V.a)({client_id:a,redirect_uri:r,response_type:"code",state:s?JSON.stringify(s):void 0},l||{}));return null!=i?n.createElement(i,{url:u}):null!=c?c({url:u}):null!=o?(n.Children.only(o),o({url:u})):null}}]),t}(n.Component);K.defaultProps={state:null,args:null,render:null,component:null,children:null};var R=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(K,{authorizeUrl:"https://github.com/login/oauth/authorize",clientId:"72e6ff232e91e678d6f6",redirectUri:"https://www.pleaseban.me/oauth",state:{from:"/login"},args:{scope:"user:email"},render:function(e){var t=e.url;return r.a.createElement("a",{href:t},"\u4f7f\u7528github\u767b\u9646")}})}}]),t}(n.Component),J=a(99),X=a.n(J),F=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"section columns"},r.a.createElement("div",{className:"column is-5"}),r.a.createElement("div",{className:"column "},r.a.createElement("div",{className:"title"},"\u7b2c\u4e09\u65b9\u767b\u9646"),r.a.createElement("div",{className:"button"},r.a.createElement("img",{style:{height:20,"margin-right":5},src:X.a,alt:"github"}),r.a.createElement(R,{setUser:this.props.setUser}))),r.a.createElement("div",{className:"column"}))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={processing:!0,error:!1,error_message:""},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Object(H.parse)(window.location.search);j.Cloud.run("githubOauth",t).then(function(t){if("ok"===t.status){var a=new j.User,n={id:t.id,access_token:t.access_token};a._linkWith("github",{authData:n}).then(function(t){e.setState({processing:!1}),window.location="/",console.log("user:",t)})}else e.setState({progressing:!1,error:!0,error_message:t.reason})})}},{key:"render",value:function(){var e=Object(H.parse)(window.location.search);return console.log("query str",e),r.a.createElement("div",null,this.state.processing&&r.a.createElement("p",null,"Authorizing now..."),this.state.error&&r.a.createElement("p",{className:"error"},"An error occurred: ",this.state.error_message))}}]),t}(n.Component),q=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(L,{setUser:this.props.setUser}))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={progressing:!0},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.User.logOut().then(function(){e.setState({progressing:!1}),window.location="/"})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",{className:"h3"},this.state.progressing?"\u9000\u51fa\u4e2d":"\u9000\u51fa\u6210\u529f"))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={expand:!1},a.handleClick=a.handleClick.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleClick",value:function(e){this.setState({expand:!this.state.expand})}},{key:"render",value:function(){var e=!1,t=this.props.extraInfo;null==t||""===t?t="\u6682\u65e0":(e=t.length>100,this.state.expand||(t=e?t.substring(0,100)+"...":t));var a="extra "+(!0===e?"clickIcon":"");return r.a.createElement("li",null,r.a.createElement("div",{className:"card "},r.a.createElement("div",{className:"card-content survey-card-container"},r.a.createElement("div",{className:"company-info"},r.a.createElement("p",{className:"title is-4 is-primary"},this.props.company),r.a.createElement("p",{className:"subtitle is-6"},this.props.department," / ",this.props.jobTitle)),r.a.createElement("div",{className:"detail"},r.a.createElement("section",{className:"questions"},r.a.createElement("span",null,"\u662f\u5426\u5b9e\u884c996: ",r.a.createElement("b",null,Y[this.props.isOvertime])," "),r.a.createElement("span",null,"\u662f\u5426\u53ef\u4ee5\u8c03\u4f11: ",r.a.createElement("b",null,M[this.props.overtimeShift])),r.a.createElement("span",null,"\u662f\u5426\u6709\u52a0\u73ed\u8865\u507f: ",r.a.createElement("b",null,W[this.props.overtimeAllowance]))),r.a.createElement("section",{className:a,onClick:this.handleClick},r.a.createElement("span",null,"\u8be6\u60c5: ",t," "))))))}}]),t}(n.Component);$.defaultProps={name:"\u67d0\u4e0d\u77e5\u540d\u516c\u53f8",totalIndex:0,totalCount:0,groupCount:0,agreeCount:0,disagreeCount:0};var ee=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.surveys.map(function(e){return r.a.createElement($,{key:e.objectId,company:e.company,jobTitle:e.jobTitle,department:e.department,isOvertime:e.isOvertime,overtimeShift:e.overtimeShift,overtimeAllowance:e.overtimeAllowance,extraInfo:e.extraInfo})});return r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"}),r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement("ul",{id:"survey-list"},e)),r.a.createElement("div",{className:"column"}))}}]),t}(n.Component),te=function(){return r.a.createElement("div",{className:"section"},r.a.createElement("h3",{className:"title"},"\u6682\u65f6\u6ca1\u6709\u4fe1\u606f"))},ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={surveys:null,currentPage:1,pages:1,loading:!0},a.gotoPage=a.gotoPage.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"gotoPage",value:function(e){var t=this;this.setState({loading:!0});var a=new j.Query("Company");a.skip(this.props.pageSize*(e-1)),a.limit(this.props.pageSize),a.find().then(function(a){var n=a.map(function(e){var t=e.toJSON();return t.ref=e,t});t.setState({companies:n,loading:!1,currentPage:e})}).catch(function(e){t.setState({loading:!1}),console.log(e)})}},{key:"componentDidMount",value:function(){var e=this,t=new j.Query("Survey");t.count().then(function(t){var a=Math.floor(t/e.props.pageSize)+(t%e.props.pageSize>0?1:0);e.setState({pages:a})}).catch(function(e){k.a.error("page load failed, please try again"),console.log(e)}),t.limit(10).find().then(function(t){var a=t.map(function(e){return e.toJSON()});e.setState({surveys:a,loading:!1})}).catch(function(e){k.a.error("page load failed, please try again"),console.log(e)})}},{key:"render",value:function(){var e=this.state.surveys&&0!==this.state.surveys.length;return r.a.createElement("div",{className:"section ",id:"survey-list-container"},r.a.createElement(w,{loading:this.state.loading}),e?r.a.createElement(ee,{surveys:this.state.surveys}):r.a.createElement(te,null),e&&r.a.createElement(T,{objectName:"Survey",current:this.state.currentPage,count:this.state.pages,gotoPage:this.gotoPage}))}}]),t}(n.Component);ae.defaultProps={pageSize:10},ae.protoTypes={pageSize:x.a.number};a(184);var ne=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={user:null},a.setUser=a.setUser.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log("\u770b\u4ec0\u4e48\u6e90\u4ee3\u7801,\u6709\u8fd9\u70b9\u65f6\u95f4\u8fd8\u4e0d\u53bb996!");var e=j.User.current();e&&this.setUser(e)}},{key:"setUser",value:function(e){this.setState({user:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(v,{user:this.state.user,setUser:this.setUser}),r.a.createElement(d.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Q,{user:e.state.user})}}),r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/survey/add",component:Z}),r.a.createElement(d.a,{path:"/survey",component:ae})),r.a.createElement(d.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(F,{setUser:e.setUser})}}),r.a.createElement(d.a,{exact:!0,path:"/logout",component:_}),r.a.createElement(d.a,{path:"/oauth",render:function(){return r.a.createElement(q,{setUser:e.setUser})}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},99:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAERklEQVR4AdzaA7ArSRTG8cl99tq2bdu2bdu2bdu2dwvPtm2bF9/+16lU0Gd0e3aqfnFOz/nC7iRIelt26WVWwym4H5+hLyZgDgRwmsvQF5/ifpyM1YKsbex0FXbHCxgBRTQCL2B3VPnc+DK4E6OhhIzGnVjap8ZXwuOYD6VkPh7HSvXZeCNcjblQPZmLq9Eo7ea3RD/IE/2wZRqN53ApFkKeWYhLkEuq+Wb4APLcB2gWd/Nt0A7KiHZoE2fzXaGM6YI2UZtvjvZQRrVH8yhveJ9AGfcJcmECuAr6n7jK2vz2qIYq2A2b41S8i/lQwubjXZyKzbEbVEE1tndtvgkGQxV0K3LfxXAdpkExm47rsFiRcbtBFQxGE5cAboEcPFSmxmJ4ArUQhMn4Da/hXlyJSwBOcxlew2+YDAHUoBYWKzPew5CDWyo1vwYWQA5Oc/zKfBJWDfEetCpOwpYOtz0NcrAAa5Qr9DzkaD+PZqT7QY6eL1VkFSyCHB3sUQCHQI4WYZViRR6BDM7wKIAzIINHis3tJ0IGz3gUwDOQwUQ0yi9wEGTUxaMAukBGB+UXeBMyWIRtPApgGyyCDN7MLzABMrjZw0XZmyCDCf/ccX3IYCyaehhAU4yBDNYPODgHMrjB46X5GyCDcwIOHoUM1vQ4gLUgg0cDDr6BHI0OPN+ML4NvAg4GQY5+zEAAP0KOBgUcTIYcvZWBAN6GHE0JnGd/wGsZCOA1yNGCwLq+loEAPoVcGQLIzHvAT9YA5kGOhmQggCGQo3mBcRZYjWYeN98M1ZCjiWFmUjt7HMAu5hktBx9BBvd5HMB9kMFHAQd3QAbDUOXpf5OGQQZ3hF0MOc7DAI4LtSjCwTKQ0VA096j55hgGGS0TZUnpJY8CeCnSkp79fQDATR40fwsUwh35RdaDQnoBTevpM/8FKKT1Cgt2gEIahIORS+mPWodjCBRSh2KFT4GK+Bk741C8UGH22AuXYrWEVnuuQj8oolOKDdAQo6ACo7FB3u3WcdyJ4XgNV+EQNDE02wpH4ya8gzFQTEahYamBz4WKmIuT8263NAZDjl5Hzvg0fwVKwLnlBm6IPi6/B3J6a9RCFUxF6xBP+daYAsWoDxpWGnhPqIQFBS+HW51WXk2b/Y8PBnu6Dvw8VMI3BU/Ve6AyDowQwP5QTJ63DNyywsfMJgW33xZvYjBmYCg+wiloEiGANaAYDEFL6+AbYQ5UxPspfdlZDIpoDjYKuwNHlHmjOzwDAdTiiKg7cQ5UxDwc6XkA58S1I5dAJXyI7ZDzLIBL4t6ZkyssOE7Gr/gMX6ADZmCxlAOoxslJPSV3xUTIIM0AJmLXpN+YVsSvHgbwK1ZMay6ew4WY40EAc3AxcvWxGrMCXkEdVMJyEeovDZVQh1exgg9rchvgdSyCCiwdoe5SUIFqvI4NfPxhYgVchwEQ3omh5jsQBuA6/D4qxvgoGAUAsc/MQ8yReXMAAAAASUVORK5CYII="}},[[100,1,2]]]);
//# sourceMappingURL=main.1d28f881.chunk.js.map